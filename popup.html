<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=380" />
  <link rel="stylesheet" href="popup.css" />
  <title>Ghost Commits</title>
</head>
<body>
  <!-- Scanline overlay -->
  <div class="scanlines"></div>

  <div class="container">
    <!-- Header -->
    <header>
      <div class="logo glitch" data-text="ðŸ‘»">ðŸ‘»</div>
      <h1 class="glitch" data-text="GHOST_COMMITS">GHOST_COMMITS</h1>
      <p class="subtitle">&gt; keeping your graph green since init</p>
    </header>

    <!-- Setup section -->
    <section id="setup-section" class="section hidden">
      <div class="terminal-block">
        <div class="terminal-header">
          <span class="terminal-dot red"></span>
          <span class="terminal-dot yellow"></span>
          <span class="terminal-dot green"></span>
          <span class="terminal-title">setup.sh</span>
        </div>
        <div class="terminal-body">
          <p class="terminal-line"><span class="prompt">$</span> <span class="cmd">cat</span> instructions.txt</p>
          <button id="guide-toggle" class="guide-toggle">
            <span class="guide-toggle-icon">â–¶</span>
            [click] how to get a token (3 steps)
          </button>
          <div id="guide-steps" class="guide-steps hidden">
            <div class="step">
              <span class="step-num">01</span>
              <div class="step-body">
                <a href="https://github.com/settings/tokens/new?scopes=repo&description=Ghost+Commits" target="_blank" class="step-link">&gt; open github.com/settings/tokens â†—</a>
                <span class="step-detail">// repo scope will be pre-checked</span>
              </div>
            </div>
            <div class="step">
              <span class="step-num">02</span>
              <div class="step-body">
                <span class="step-detail">// set expiration â†’ generate token</span>
              </div>
            </div>
            <div class="step">
              <span class="step-num">03</span>
              <div class="step-body">
                <span class="step-detail">// copy <code>ghp_â€¦</code> â†’ paste below</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="field">
        <label for="token-input">&gt; ENTER_ACCESS_TOKEN</label>
        <input id="token-input" type="password" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" spellcheck="false" autocomplete="off" />
      </div>

      <div class="field">
        <label for="commits-input">&gt; COMMITS_PER_DAY</label>
        <div class="stepper">
          <button id="dec-btn" class="stepper-btn" aria-label="Decrease">âˆ’</button>
          <input id="commits-input" type="number" min="1" max="20" value="3" />
          <button id="inc-btn" class="stepper-btn" aria-label="Increase">+</button>
        </div>
        <p class="hint" id="schedule-hint">&gt; 3 commits // random // 06:00â€“22:00</p>
      </div>

      <!-- Schedule mode -->
      <div class="field">
        <label>&gt; SCHEDULE_MODE</label>
        <div class="mode-toggle">
          <button id="mode-random" class="mode-btn active" data-mode="random">RANDOM</button>
          <button id="mode-fixed" class="mode-btn" data-mode="fixed">FIXED_TIMES</button>
        </div>
      </div>

      <!-- Fixed times editor (setup) -->
      <div id="fixed-times-setup" class="fixed-times-section hidden">
        <label>&gt; SET_COMMIT_TIMES</label>
        <div id="time-slots-setup" class="time-slots"></div>
      </div>

      <button id="save-btn" class="primary-btn">
        <span id="save-label">&gt; INITIALIZE</span>
        <span id="save-spinner" class="spinner hidden"></span>
      </button>

      <p id="setup-error" class="error hidden"></p>
    </section>

    <!-- Dashboard section -->
    <section id="dashboard-section" class="section hidden">
      <div class="status-card">
        <div class="status-row">
          <span class="status-label">STATUS</span>
          <span id="status-badge" class="badge badge-active">ONLINE</span>
        </div>
        <div class="status-row">
          <span class="status-label">TODAY</span>
          <span id="today-count">0 / 3 deployed</span>
        </div>
        <div class="status-row">
          <span class="status-label">LAST_PUSH</span>
          <span id="last-commit">â€”</span>
        </div>
        <div class="status-row">
          <span class="status-label">TARGET</span>
          <a id="repo-link" href="#" target="_blank" class="repo-link">â€”</a>
        </div>
        <div class="status-row">
          <span class="status-label">SCHEDULE</span>
          <span id="schedule-info" class="schedule-info">â€”</span>
        </div>
        <div class="status-row">
          <span class="status-label">NEXT_EXEC</span>
          <span id="next-check" class="next-check">â€”</span>
        </div>
      </div>

      <!-- Instant commit -->
      <button id="force-commit-btn" class="force-btn">
        <span id="force-label">âš¡ EXECUTE_NOW</span>
        <span id="force-spinner" class="spinner hidden"></span>
      </button>
      <p id="force-status" class="force-status hidden"></p>

      <div class="controls">
        <div class="field inline">
          <label for="edit-commits">COMMITS/DAY</label>
          <div class="stepper small">
            <button id="edit-dec-btn" class="stepper-btn" aria-label="Decrease">âˆ’</button>
            <input id="edit-commits" type="number" min="1" max="20" value="3" />
            <button id="edit-inc-btn" class="stepper-btn" aria-label="Increase">+</button>
          </div>
        </div>

        <div class="field inline">
          <label>MODE</label>
          <div class="mode-toggle small">
            <button id="dash-mode-random" class="mode-btn active" data-mode="random">RND</button>
            <button id="dash-mode-fixed" class="mode-btn" data-mode="fixed">FIX</button>
          </div>
        </div>

        <!-- Fixed times in dashboard -->
        <div id="fixed-times-dash" class="fixed-times-section hidden">
          <div id="time-slots-dash" class="time-slots"></div>
        </div>

        <div class="btn-row">
          <button id="toggle-btn" class="secondary-btn">PAUSE</button>
          <button id="disconnect-btn" class="danger-btn">TERMINATE</button>
        </div>
      </div>

      <p id="dashboard-error" class="error hidden"></p>
    </section>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
